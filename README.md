# Fuzzy Network Project

This project simulates a distributed system with fuzzy logic-based load balancing and provides a Python-based dashboard for real-time visualization.

---

## 1. How to Compile and Run

### **Requirements**

- **C++17** or newer
- **CMake** (recommended for building)
- **Boost** (for `asio`)
- **fuzzylite** (for fuzzy logic)
- **Python 3** (for visualization)
- Python packages: `dash`, `plotly`, `pandas`, `nlohmann_json` (for C++)

### **Build Instructions**

1. **Clone and enter the project directory:**
   ```sh
   git clone <repo-url>
   cd fuzzy-network-project
   ```

2. **Install dependencies:**
   - **fuzzylite:** Download and build from [fuzzylite.org](https://www.fuzzylite.com/)
   - **Boost:** Install via your package manager (e.g., `sudo apt install libboost-all-dev`)
   - **nlohmann_json:** Install via package manager or add as a submodule

3. **Build the C++ code:**
   ```sh
   mkdir build && cd build
   cmake ..
   make
   ```

4. **Run the simulation:**
   ```sh
   ./fuzzy-network-project
   ```

   This will start the simulation and automatically launch the Python dashboard.

---

## 2. C++ Components

### **a. Fuzzy Logic**

- **FuzzyLoadBalancer** ([incl/system_model.h](incl/system_model.h), [src/system_model.cpp](src/system_model.cpp))
  - Uses [fuzzylite](https://www.fuzzylite.com/) to compute transfer probabilities based on node workloads.
  - Encapsulates fuzzy logic rules for deciding when and how much load to transfer between nodes.

### **b. System Model**

- **PhysicalNode**
  - Represents a single node with a workload and a queue.
  - Can be a Designated Replica (DR) for its group.
  - Supports auto-dequeue and workload management.

- **PhysicalGroup**
  - A group of physical nodes.
  - Handles intra-group load balancing using fuzzy logic.
  - Selects a DR and manages node membership.

- **LogicalNode**
  - Represents a logical abstraction over a physical group.
  - Used for higher-level grouping and escalation.

- **LogicalGroup**
  - Contains multiple logical nodes.
  - Manages cross-group escalation and overall monitoring.

- **Utils**
  - Logging (plain text and JSON state logs)
  - Serialization to JSON for visualization

---

## 3. Python Visualization

- **Location:** [`pyscript/workload_monitor.py`](pyscript/workload_monitor.py)
- **How it works:**
  - Reads the JSON state log generated by the C++ simulation.
  - Uses [Dash](https://dash.plotly.com/) and [Plotly](https://plotly.com/python/) to display:
    - Workload per node and group
    - Logical and physical group structure
    - Live log messages and transfer events
  - The dashboard auto-refreshes and provides interactive plots and tables.

- **To run manually:**
  ```sh
  cd pyscript
  python3 workload_monitor.py <path-to-json-log>
  ```

  (Normally, the C++ code launches this automatically.)

---

## 4. Directory Structure

```
src/        # C++ source files (main.cpp, system_model.cpp, utils.cpp)
incl/       # C++ headers (system_model.h, utils.h)
pyscript/   # Python dashboard and notebook
log/        # Logs and JSON state files (auto-created)
build/      # Build directory (ignored)
```

---

## 5. References

- [fuzzylite](https://www.fuzzylite.com/)
- [Boost](https://www.boost.org/)
- [Dash](https://dash.plotly.com/)
- [Plotly](https://plotly.com/python/)
- [nlohmann/json](https://github.com/nlohmann/json)

---